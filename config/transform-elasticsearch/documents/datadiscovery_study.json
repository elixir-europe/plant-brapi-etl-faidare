{
  "document-type": "datadiscovery",
  "source-entity": "study",

  "document-transform": {
    "@type": {
      "{list}": [
        {
          "{or}": [
            {
              "{replace}":{
                "possible_terms": [ "Genotyping", "Genotyping Study" ]
              },
              "{with}": {
                "replaced_by": "Genotyping Study"
              }
            },
            {
              "{replace}":{
                "possible_terms": [
                  "Phenotypes", "Phenotyping", "Field Experiement",
                  "Greenhouse (29\u00baC/20\u00baC)", "Green house",
                  "Growth chamber", "Phenotyping Study", "raw"
                ]
              },
              "{with}": {
                "replaced_by": "Phenotyping Study"
              }
            },
            "Study"
          ]
        }
      ]
    },
    "@id": "{.studyPUI}",

    "schema:includedInDataCatalog": "{.source}",
    "schema:identifier": "{.studyDbId}",
    "schema:name": {
      "{or}": ["{.studyName}", "{.name}"]
    },
    "schema:url": "{.documentationURL}",
    "schema:description": {
      "{join}": [
        "\"",
        { "{or}": ["{.studyName}", "{.name}"] },
        "\" is a ",
        { "{or}": ["{.studyTypeName}", "{.studyType}", "study"] },
        { "{or}": [" conducted from {.startDate} to {.endDate}", " running since {.startDate}"] },
        { "{join}": [" (seasons: ", {"{join}": "{.seasons}", "{separator}": ", "}, ")"], "{accept_none}": false },
        { "{or}": [
          " in {.locationURI => .locationName} ({.locationURI => .countryName})",
          " in {.locationURI => .countryName}"
        ]},
        ". this study is part of the {.programName} program",
        ".",
        " {.studyDescription}"
      ]
    },

    "germplasm": {
      "cropName": {
        "{list}": [
          "{.germplasmURIs => .commonCropName}",
          "{.germplasmURIs => .taxonCommonNames}",
          "{.germplasmURIs => .genus}",
          "{.germplasmURIs => .genus + .species}",
          "{.germplasmURIs => .genus + .species + .subtaxa}",
          "{.germplasmURIs => .taxonSynonyms}"
        ], "{transform}": ["capitalize", "flatten", "distinct"]
      },
      "germplasmList": {
        "{flatten_distinct}": [
          "{.germplasmURIs => .panel.name}",
          "{.germplasmURIs => .collection.name}",
          "{.germplasmURIs => .population.name}",
          "{.germplasmURIs => .holdingGenbank.instituteName}"
        ]
      },
      "accession": {
        "{flatten_distinct}": [
          "{.germplasmURIs => .germplasmName}",
          "{.germplasmURIs => .defaultDisplayName}",
          "{.germplasmURIs => .accessionNumber}",
          "{.germplasmURIs => .synonyms}"
        ]
      }
    },

    "trait": {
      "observationVariableIds": {
        "{flatten_distinct}": [
          "{.observationVariableDbIds}"
        ]
      }
    }
  }
}
